
# 文件夹名即密码的静态下载网站 PRD（终稿）

## 1. 文档信息

* 文档名称：基于 GitHub Pages 的「文件夹名即密码」文件下载网站 PRD
* 文档版本：V1.0（终稿）
* 作者：产品/项目（根据需求方口述整理）
* 最近更新：2025-11-17

---

## 2. 背景与目标

### 2.1 背景

* 本项目是一个**一次性、短时运行的小工具**：

  * 网站实际对外开放时长约 **3 小时**。
  * 访问人数上限约 **20 人**，每人访问 1–2 次，总下载次数约 **40 次**。
* 每个访问者对应一个独立的内容包：

  * 最多 **20 个文件夹 / 20 个密码**。
  * 每个文件夹里存放该访问者需要下载的内容（可以是一个压缩包）。
* 为了**极简运维和部署**：

  * 希望使用 **GitHub Pages 一键静态托管**；
  * 不希望引入后台服务、数据库或复杂架构。
* **明确不追求安全性**：

  * 密码只是一个「简单分流机制」；
  * 即使访问者输错密码进了别人的内容，也只会影响访问者本人体验，不视为系统风险；
  * 不做任何攻击防护、风控与审计。

### 2.2 目标

* 提供一个极简网页：

  * 用户输入「密码」（其实就是对应文件夹名）；
  * 系统按约定规则拼一个下载链接并直接下载对应内容。
* 管理方式简单粗暴：

  * 维护者只需要在仓库中**新增一个文件夹**，文件夹名即为密码；
  * 在该文件夹内放一个约定名称的压缩包文件；
  * 推送到 GitHub 即可使用，无需改代码。
* 满足以下**唯一核心成功标准**：

  > “只要输入了正确密码的人，**必然**能下载到对应密码下的那份内容。”

---

## 3. 范围（Scope）

### 3.1 在范围内

* 一个托管在 GitHub Pages 上的静态网页：

  * 只有一个主页面（或极少数静态资源）。
* 前端逻辑（纯 HTML/CSS/JavaScript）：

  * 获取用户输入的密码；
  * 根据密码拼接出**约定格式的下载 URL**；
  * 触发浏览器直接下载该 URL 对应的文件；
  * 如果返回 404 或无法下载，则提示“密码错误或不存在”。
* 仓库内的目录结构规范：

  * 指定一个目录（如 `packages/`）存放所有密码文件夹；
  * 每个密码对应一个子目录，目录名 = 密码；
  * 子目录中放置一个约定名称的压缩包，例如 `content.zip`。

### 3.2 不在范围内

* 不提供后台管理界面（Admin Console）。
* 不提供用户账号体系。
* 不提供访问统计、日志查询、风控等功能。
* 不做任何高可用、高并发设计。
* 不做密码加密/保护（密码可能在前端逻辑中暴露）。

---

## 4. 关键需求决策总结（方便开发快速对齐）

1. **密码与资源关系**

   * 密码 = 文件夹名（区分大小写的字符串）。
   * 每个密码对应仓库中的一个子目录：`packages/<密码>/`。

2. **下载内容形式**

   * 约定每个子目录中存在一个固定名称的压缩包文件：

     * 文件名统一为：`content.zip`（示例命名，可在实现时最终确认）
   * 也就是说，最终下载 URL 规则为：
     `/<仓库根路径>/packages/<密码>/content.zip`

3. **校验方式**

   * **不维护合法密码列表**，也不在前端枚举所有密码；
   * 前端拿到密码后，**直接按规则拼 URL 并发起下载请求**：

     * 若该文件存在：浏览器正常下载 → 视为密码正确；
     * 若该文件不存在（返回 404 等）：在页面提示“密码错误或不存在”。

4. **安全与风险观**

   * 不保证内容不被「查看源码」「猜 URL」等方式访问；
   * 不对“访问者误入他人文件夹内容”负责，不视为系统缺陷；
   * 唯一要求：输入正确密码的人，**一定**能拿到对应目录的 `content.zip`。

---

## 5. 用户与场景

### 5.1 用户角色

1. **访问者（Visitor）**

   * 收到网页链接和一个密码（例如：`user001`、`A区-01` 等）；
   * 打开网页 → 输入密码 → 下载内容。

2. **维护者（Admin/你）**

   * 负责：

     * 准备各访问者对应的内容（压缩包）；
     * 在仓库中创建密码命名的文件夹；
     * 把压缩包放入对应文件夹；
     * 推送代码并启用 GitHub Pages。

### 5.2 核心场景

#### 场景 1：访问者正确下载内容

* 前提：

  * 维护者已在仓库中创建 `packages/abc123/content.zip`；
  * 密码为 `abc123`。
* 流程：

  1. 访问者打开网页。
  2. 输入密码 `abc123`。
  3. 点击「下载」。
  4. 前端拼 URL：`packages/abc123/content.zip` 并发起下载。
  5. 文件存在 → 浏览器下载成功。
* 结果：

  * 访问者成功拿到对应内容。

#### 场景 2：访问者密码输错或不存在

* 前提：

  * 仓库中不存在 `packages/wrong123/content.zip`。
* 流程：

  1. 访问者输入 `wrong123`。
  2. 点击「下载」。
  3. 前端拼 URL：`packages/wrong123/content.zip` 并尝试下载。
  4. 返回 404 或下载失败。
  5. 前端捕获失败，在页面提示“密码错误或不存在，请检查后重试”。
* 结果：

  * 访问者知道自己密码错误或不存在。

#### 场景 3：访问者误输他人密码

* 例如：

  * 实际属于 A 的密码是 `userA`，B 误输入了 `userA`。
* 结果：

  * B 将下载到 A 的内容。
  * 这是接受的情况，不算系统问题。

---

## 6. 功能需求

### 6.1 前台页面

**页面名称**：文件下载入口页
**URL**：`/index.html`（GitHub Pages 默认首页）

#### 6.1.1 页面内容

* 标题区域

  * 文案示例：“文件下载入口”
  * 可在 HTML 中轻松修改文本，无需后台。
* 输入区域

  * 文本输入框（id 如 `passwordInput`）

    * placeholder：“请输入密码（即文件夹名）”
  * 提交按钮（id 如 `downloadButton`）

    * 文案：“下载”
* 提示区域

  * 用于显示以下提示：

    * 输入为空提示；
    * 密码错误/不存在；
    * 其他异常信息。

#### 6.1.2 交互逻辑

* 点击按钮或按回车时：

  1. 读取输入框内容 `password`；
  2. 若为空：

     * 在提示区域显示：“请输入密码”；
     * 不发起任何下载请求。
  3. 若非空：

     * 调用下载逻辑：`startDownload(password)`。

* 用户体验要求：

  * 在发起下载时，可以禁用按钮 1–2 秒，以避免连续多次点击（非必需，但推荐）。
  * 错误提示在同一区域展示，避免弹窗过多打扰。

### 6.2 下载逻辑（前端）

#### 6.2.1 URL 拼接规则

* 设仓库根路径为：`https://<username>.github.io/<repo>/`
* 静态目录规则：

  * 所有密码目录统一放在 `packages/` 目录下。
  * 每个密码目录下有一个 `content.zip` 文件。
* 则下载 URL 规则为：

```text
下载 URL = <站点相对路径> + "packages/" + <password> + "/content.zip"
例如：packages/abc123/content.zip
```

> 注：在前端可只使用相对路径 `packages/<password>/content.zip`，由浏览器自动拼上当前站点域名和路径。

#### 6.2.2 下载触发方式

* 前端通过以下任一方式触发下载（实现自由度留给开发，PRD仅给原则）：

  * 创建一个隐藏的 `<a>` 标签，将 `href` 设置为上述 URL，并调用 `.click()`；
  * 或者直接将 `window.location.href` 设置为该 URL。
* 不需要在前端事先发 HEAD 请求判断 404（除非开发觉得有必要）：

  * 若路径不存在，浏览器会显示 404 页面；
  * 或者可以先发 fetch 请求检查是否为 200，再决定是否提示错误信息。

**推荐做法（兼顾提示体验）：**

1. 使用 `fetch()` 或 `HEAD` 请求测试文件是否存在；
2. 若响应状态为 200：

   * 再创建 `<a>` 标签触发真实下载；
3. 若非 200：

   * 在页面提示：“密码错误或对应内容不存在，请确认后重试”。

### 6.3 文案需求

* 输入为空：

  * “请输入密码”
* 密码错误 / 内容不存在：

  * “密码错误或对应内容不存在，请确认后重试”
* 其他错误（网络问题等）：

  * “下载失败，请稍后重试”

---

## 7. 目录结构约定（给实现用）

示例目录结构：

```text
/ （仓库根）
  ├─ index.html          # 主页面
  ├─ main.js             # JS 脚本（处理输入、拼 URL、触发下载）
  ├─ style.css           # 页面样式（可选）
  └─ packages/           # 所有密码对应的目录
       ├─ user001/
       │    └─ content.zip
       ├─ user002/
       │    └─ content.zip
       └─ ...
```

使用说明（维护者视角）：

1. 准备好某个用户的所有文件；
2. 在本地把这些文件压缩成一个 `content.zip`（或项目实际约定的名称）；
3. 在 `packages/` 下新建一个文件夹，名字就是你要给对方的密码，例如 `user001`；
4. 把 `content.zip` 放进 `packages/user001/`；
5. 提交并推送到 GitHub，GitHub Pages 自动更新；
6. 把网页 URL 和密码 `user001` 发给对方，对方即可使用。

---

## 8. 非功能需求

### 8.1 性能

* 单个压缩包体积小（约 200 KB），通过静态托管下载速度很快；
* 最大总访问量约 40 次，无需任何性能优化；
* 页面与脚本体积很小，基本可秒开。

### 8.2 安全性（按需求极度简化）

* 不隐藏密码和目录结构，不对源码暴露做任何处理；
* 不限制重复访问，不限制同一密码在多终端使用；
* 不做任何攻击检测与防护；
* 安全相关的任何后果由使用场景自行承担，系统只保证“按规则可用”。

### 8.3 可维护性

* 所有行为只需通过：

  * 修改文件夹与文件；
  * push 代码到 GitHub；
    即可生效，无需复杂运维。

---

## 9. 约束 & 风险说明

1. **目录名泄露风险**

   * 任意人如果猜到或看到某个密码（文件夹名），就能下载对应内容。
   * 你已明确接受这一点，本项目不再做安全性设计。

2. **GitHub Pages 可用性风险**

   * 若 GitHub Pages 在使用期间出现短暂故障，会导致无法下载。
   * 鉴于只运行 3 小时，不对可用性做特别保障。

3. **浏览器兼容性**

   * 默认兼容现代浏览器（Chrome / Edge / Firefox / Safari 等）。
   * 不考虑 IE 等非常老旧浏览器。

